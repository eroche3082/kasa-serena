FASE 7 â€“ CHAT AI DE DISEÃ‘O
ğŸ¯ Objetivo:
Crear un asistente conversacional donde el usuario pueda generar diseÃ±os de espacios (piscinas, contenedores inteligentes, oficinas, etc.) mediante interacciÃ³n con IA. El chat ofrecerÃ¡ sugerencias, harÃ¡ preguntas sobre preferencias y generarÃ¡ imÃ¡genes visuales basadas en la entrada del usuario.

ğŸ§  PROMPT COMPLETO â€“ FASE 7: Chat AI de DiseÃ±o
md
Copiar
Editar
# ğŸ§  FASE 7 â€“ CHAT AI DE DISEÃ‘O

## ğŸ¯ Objetivo:
Implementar un asistente conversacional que guÃ­e al usuario a travÃ©s del proceso de diseÃ±o, brindando sugerencias, mostrando imÃ¡genes generadas por IA y permitiendo la descarga de cotizaciones o diseÃ±os.

---

## âœ… PASO 1 â€“ Crear la Interfaz de Chat

1. **Componente `ChatDesignGenerator.tsx`**  
   Este componente debe manejar el flujo conversacional de preguntas y respuestas con el usuario.
   
   **Ejemplo de flujo bÃ¡sico:**
   
   - IA: *"Hola, Â¿quÃ© tipo de diseÃ±o deseas crear hoy?"*  
   - Usuario: *"Piscina modular"*
   - IA: *"Â¡Genial! Â¿QuÃ© tamaÃ±o prefieres?"*
   - Usuario: *"5x3m"*
   - IA: *"Excelente. Â¿QuÃ© acabado prefieres? (Mosaico, Cemento pulido, etc.)"*
   
2. **Pregunta sobre preferencias:**
   El asistente debe guiar al usuario en la elecciÃ³n de:
   - Tipo de diseÃ±o (piscina, oficina, container, etc.)
   - Materiales (acabados, vidrio, etc.)
   - TamaÃ±o y caracterÃ­sticas opcionales (panel solar, iluminaciÃ³n LED, etc.)

3. **Mostrar imagen generada:**
   DespuÃ©s de que el usuario ingrese sus preferencias, mostrar la **imagen generada por IA**.
   
4. **BotÃ³n de acciÃ³n final**:
   - **Solicitar cotizaciÃ³n**
   - **Descargar PDF**

---

## âœ… PASO 2 â€“ Backend y ConexiÃ³n con Gemini API

El endpoint de **chat con IA** debe estar en `server/routes.ts` para manejar las solicitudes del frontend y generar las respuestas dinÃ¡micas.

1. **Crear endpoint en `server/routes.ts`:**

```ts
app.post("/api/design-chat", chatWithAI);
FunciÃ³n chatWithAI en server/gemini.ts:

Recibe los datos del usuario (preferencias, tipo de diseÃ±o, etc.).

Llama a la API de Gemini para generar las respuestas basadas en texto y las imÃ¡genes visuales.

Devuelve la imagen y respuesta de IA al frontend.

ts
Copiar
Editar
export async function chatWithAI(req, res) {
  const { userInputs } = req.body;
  const prompt = generatePrompt(userInputs);  // FunciÃ³n para generar prompt para Gemini
  const response = await callGeminiAPI(prompt); // Llamada a la API de Gemini
  res.json(response);  // Enviar la respuesta generada al frontend
}
âœ… PASO 3 â€“ LÃ³gica de ConversaciÃ³n e Interfaz
El flujo del chat debe permitir al usuario avanzar de forma interactiva:

IntroducciÃ³n inicial:

IA saluda al usuario y pregunta quÃ© tipo de diseÃ±o desea crear.

Preguntas por parÃ¡metros:

IA hace preguntas como "Â¿QuÃ© tamaÃ±o te gustarÃ­a?", "Â¿QuÃ© estilo prefieres?", etc.

GeneraciÃ³n de imagen por IA:
DespuÃ©s de que el usuario haya proporcionado las respuestas, el chat genera y muestra una imagen.

Opciones de acciÃ³n:

OpciÃ³n para "Solicitar cotizaciÃ³n": Enviar los detalles de la solicitud a la base de datos o por email.

OpciÃ³n para "Descargar PDF": Generar un PDF con el diseÃ±o y detalles.

âœ… PASO 4 â€“ Estilo Visual y UX
Responsividad:

El chat debe ser accesible en dispositivos mÃ³viles y de escritorio.

DiseÃ±o visual claro:

Incluir burbujas de chat para que el flujo sea intuitivo.

Estilo minimalista con colores neutros y detalles en acentos dorados.

Interactividad fluida:

Respuestas rÃ¡pidas y dinÃ¡micas con sugerencias visibles mientras el usuario escribe.

âœ… PASO 5 â€“ VerificaciÃ³n
El chat debe ser capaz de generar respuestas coherentes con las preguntas del usuario.

DespuÃ©s de cada entrada del usuario, se debe mostrar una imagen de diseÃ±o generada por IA.

El botÃ³n de â€œSolicitar cotizaciÃ³nâ€ debe guardar la solicitud en la base de datos y enviar notificaciÃ³n si es necesario.

El botÃ³n de â€œDescargar PDFâ€ debe generar un archivo con el diseÃ±o e informaciÃ³n.

ğŸ›‘ INSTRUCCIÃ“N PARA EL AGENTE
ğŸ‘‰ REPLY "YES" OR "NO" ONCE YOU COMPLETE AND VERIFY FASE 7.
ğŸ‘‰ LOG FASE 7 AS COMPLETE IN /agent-checklist.
ğŸ‘‰ UPLOAD A SCREENSHOT OF THE DESIGN CHAT INTERFACE TO /internal-map.

