PROMPT OFICIAL â€“ FASE 5.5: GENERACIÃ“N DE PDF + FLUJO DE COTIZACIÃ“N
md
Copiar
Editar
# ğŸ“„ FASE 5.5 â€“ GENERACIÃ“N AUTOMÃTICA DE PDF Y FLUJO DE COTIZACIÃ“N

## ğŸ¯ Objetivo:
Permitir al usuario exportar su diseÃ±o de Smart Container como un archivo PDF descargable, que incluya el render, descripciÃ³n tÃ©cnica, lista de materiales, tiempo estimado y botones de acciÃ³n.

---

## âœ… PASO 1 â€“ Crear funciÃ³n de generaciÃ³n de PDF

Archivo sugerido:  
```bash
client/src/lib/pdfGenerator.ts
CÃ³digo base usando html2pdf.js o jspdf:

ts
Copiar
Editar
import html2pdf from "html2pdf.js";

export function generateSmartContainerPDF(containerData: {
  image: string;
  title: string;
  description: string;
  materials: string[];
  estimatedTime: string;
}) {
  const element = document.createElement("div");
  element.innerHTML = `
    <h1>${containerData.title}</h1>
    <img src="${containerData.image}" width="100%" />
    <p>${containerData.description}</p>
    <h3>Materiales:</h3>
    <ul>
      ${containerData.materials.map((m) => `<li>${m}</li>`).join("")}
    </ul>
    <p><strong>Tiempo estimado:</strong> ${containerData.estimatedTime}</p>
  `;

  html2pdf().from(element).save("SmartContainer-KasaSerena.pdf");
}
Instalar librerÃ­a (si no estÃ¡):

bash
Copiar
Editar
npm install html2pdf.js
âœ… PASO 2 â€“ Integrar botÃ³n en SmartContainerGenerator.tsx
DespuÃ©s de mostrar los resultados generados:

tsx
Copiar
Editar
import { generateSmartContainerPDF } from "@/lib/pdfGenerator";

<Button onClick={() => generateSmartContainerPDF({
  image: generatedImage,
  title: "Contenedor Inteligente â€“ Kasa Serena",
  description: aiDescription,
  materials: materialList,
  estimatedTime: estimatedBuildTime
})}>
  Descargar PDF
</Button>
âœ… PASO 3 â€“ Crear botÃ³n de cotizaciÃ³n por WhatsApp o email
Opcionalmente puedes agregar:

tsx
Copiar
Editar
<a
  href={`https://wa.me/1XXXXXXXXXX?text=Hola, me gustarÃ­a cotizar este contenedor: ${encodeURIComponent(aiDescription)}`}
  target="_blank"
  rel="noopener noreferrer"
>
  <Button variant="outline">Enviar por WhatsApp</Button>
</a>
TambiÃ©n puedes habilitar un botÃ³n que llame al endpoint:

ts
Copiar
Editar
POST /api/quotes
{
  userId,
  tipo: "smart-container",
  datos: {...},
  image: URL,
  estado: "pendiente"
}
âœ… PASO 4 â€“ VerificaciÃ³n
PDF se descarga correctamente con render, textos y lista

BotÃ³n de WhatsApp o cotizaciÃ³n funciona sin error

Estilo visual del PDF limpio, legible y bien estructurado

Funciona tanto en escritorio como en mÃ³vil

ğŸ›‘ INSTRUCCIÃ“N PARA EL AGENTE
ğŸ‘‰ REPLY "YES" OR "NO" ONCE YOU COMPLETE AND VERIFY FASE 5.5.
ğŸ‘‰ LOG FASE 5.5 AS COMPLETE IN /agent-checklist.
ğŸ‘‰ UPLOAD A COPY OF THE GENERATED PDF SAMPLE TO /internal-map.